!function(t){var a="automatorwp_mailchimp_";t("body").on("click","#automatorwp_save_mailchimp_oauth",(function(e){e.preventDefault();var i=t(this).parent().find("#awp_mailchimp_oauth_status"),o={action:"automatorwp_mailchimp_save_oauth_credentials",nonce:automatorwp_mailchimp.nonce,api_key:t("#"+a+"api_key").val(),server_prefix:t("#"+a+"server_prefix").val()};t.post(ajaxurl,o,(function(t){t.success?(i.css("width","fit-content"),i.addClass("automatorwp-notice-success"),i.html("Credentials Saved!"),i.slideDown("fast")):0==o.api_key.length||0==o.server_prefix.length?(i.css("width","fit-content"),i.addClass("automatorwp-notice-error"),i.html("All fields are required to connect with Mailchimp"),i.slideDown("fast")):(i.css("width","fit-content"),i.addClass("automatorwp-notice-error"),i.html("Either Credentials are invalid or Mailchimp API is not accessible"),i.slideDown("fast"))}))})),t("body").on("click","#automatorwp_remove_mailchimp_oauth",(function(a){a.preventDefault(),t("#awp_mailchimp_oauth_status").text("Removing Credentials...(wait)");var e={action:"automatorwp_mailchimp_delete_oauth_credentials",nonce:automatorwp_mailchimp.nonce};t.post(ajaxurl,e,(function(a){t("#awp_mailchimp_oauth_status").text("Credentials Removed! Refresh this page. "),setTimeout((function(){location.reload()}),100)}))})),t("body").on("change",".automatorwp-action-mailchimp-user-add-tag .cmb2-id-audience select",(function(a){var e=t(this).closest(".cmb-row"),i=e.next(".cmb2-id-tags"),o=t(this).val(),n=e.hasClass("is-option-change");if("any"===o||""===o)n?i.hide():i.slideUp("fast");else{var s=i.find("select.select2-hidden-accessible");s.next(".select2").remove(),s.data("table",o),s.removeAttr("data-select2-id"),automatorwp_ajax_selector(s),n?i.show():i.slideDown("fast")}e.removeClass("is-option-change")})),t("body").on("click",".automatorwp-automation-item-label > .automatorwp-option",(function(a){var e=t(this).closest(".automatorwp-automation-item"),i=t(this).data("option"),o=e.find('.automatorwp-option-form-container[data-option="'+i+'"]').find(".cmb2-id-audience");void 0!==o&&(o.addClass("is-option-change"),o.find("select.select2-hidden-accessible").trigger("change"))}))}(jQuery);